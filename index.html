<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>Онлайн Газета</title>
<style>
body { font-family: Arial; background: #f4f4f4; margin: 0; padding: 0;}
header { background: #222; color: white; padding: 20px; text-align: center;}
.container { padding: 20px; max-width: 800px; margin: auto; }
article { background: white; padding: 15px; margin-bottom: 10px; border-radius: 5px; }
input, textarea { width: 100%; padding: 10px; margin: 5px 0; }
button { padding: 10px; margin: 5px 0; }
img { max-width: 100%; margin-top: 10px; border-radius: 5px; }
</style>
</head>
<body>

<header><h1>Онлайн Газета</h1></header>
<div class="container">

<h2>Кабінет</h2>
<input type="text" id="author" placeholder="Автор">
<input type="text" id="title" placeholder="Заголовок">
<textarea id="content" placeholder="Текст статті"></textarea>
<input type="text" id="image" placeholder="URL зображення">
<button onclick="addArticle()">Додати статтю</button>

<h2>Статті</h2>
<div id="articles"></div>

</div>

<script>
let articles = [];

// Завантажити статті з GitHub RAW
async function loadArticles(){
  const res = await fetch('https://raw.githubusercontent.com/YOURUSERNAME/online-newspaper/main/articles.json');
  articles = await res.json();
  renderArticles();
}

// Відобразити статті
function renderArticles(){
  const container = document.getElementById('articles');
  container.innerHTML = '';
  articles.forEach((a,i) => {
    const div = document.createElement('article');
    div.innerHTML = `
      <h3>${a.title}</h3>
      <p>${a.content}</p>
      <p><b>Автор:</b> ${a.author} | <b>Час:</b> ${a.time}</p>
      ${a.image ? `<img src="${a.image}">` : ''}
      <button onclick="editArticle(${i})">Редагувати</button>
      <button onclick="deleteArticle(${i})">Видалити</button>
    `;
    container.appendChild(div);
  });
}

// Додати статтю
function addArticle(){
  const author = document.getElementById('author').value;
  const title = document.getElementById('title').value;
  const content = document.getElementById('content').value;
  const image = document.getElementById('image').value;
  const time = new Date().toLocaleString();
  if(!author || !title || !content) return alert("Заповніть всі поля!");
  articles.push({author,title,content,image,time});
  renderArticles();
  saveArticles();
}

// Видалити статтю
function deleteArticle(i){
  articles.splice(i,1);
  renderArticles();
  saveArticles();
}

// Редагувати статтю
function editArticle(i){
  const a = articles[i];
  document.getElementById('author').value = a.author;
  document.getElementById('title').value = a.title;
  document.getElementById('content').value = a.content;
  document.getElementById('image').value = a.image;
  deleteArticle(i);
}

// Зберегти на GitHub через Action
async function saveArticles(){
  await fetch('https://api.github.com/repos/YOURUSERNAME/online-newspaper/dispatches',{
    method:'POST',
    headers:{
      'Accept':'application/vnd.github+json',
      'Authorization':'token YOUR_PERSONAL_ACCESS_TOKEN', // токен краще зберігати на сервері
      'Content-Type':'application/json'
    },
    body: JSON.stringify({
      event_type:'update_articles',
      client_payload:{articles}
    })
  });
}

loadArticles();
</script>

</body>
</html>
